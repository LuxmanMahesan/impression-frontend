<div class="hero">
  <div class="hero-icon">üñ®Ô∏è</div>
  <h1>D√©posez vos fichiers √† imprimer</h1>
  <p class="hero-sub">
    Entrez le code du jour remis par notre √©quipe, puis d√©posez vos documents.
    Nous nous occupons du reste.
  </p>
</div>

<div class="card depot-card">

  <!-- √âtape 1 : code -->
  <div class="etape">
    <div class="etape-header">
      <span class="etape-num">1</span>
      <span>Saisir le code du jour</span>
    </div>
    <div class="field-row">
      <input
        [(ngModel)]="code"
        placeholder="Ex : 483920"
        maxlength="6"
        [disabled]="!!idDepot"
      />
      <button (click)="demarrer()" [disabled]="!!idDepot || !code">
        D√©marrer
      </button>
    </div>
  </div>

  <p class="message" *ngIf="message">{{ message }}</p>

  <!-- √âtape 2 : fichiers -->
  <ng-container *ngIf="idDepot">
    <hr />

    <div class="etape">
      <div class="etape-header">
        <span class="etape-num">2</span>
        <span>Choisir vos fichiers</span>
      </div>

      <label class="file-label" for="file-input">
        <span class="file-icon">üìÇ</span>
        <span>S√©lectionner des fichiers‚Ä¶</span>
        <input id="file-input" type="file" multiple (change)="surChoixFichiers($event)" />
      </label>

      <ul class="file-list" *ngIf="fichiers.length">
        <li *ngFor="let f of fichiers">
          <span class="file-name">{{ f.name }}</span>
          <span class="file-size">{{ (f.size / 1024).toFixed(0) }} Ko</span>
        </li>
      </ul>
    </div>

    <hr />

    <!-- √âtape 3 : actions -->
    <div class="etape">
      <div class="etape-header">
        <span class="etape-num">3</span>
        <span>Envoyer et valider</span>
      </div>

      <div class="boutons">
        <button (click)="envoyerFichiers()" [disabled]="!fichiers.length">
          ‚¨ÜÔ∏è Uploader les fichiers
        </button>
        <button (click)="valider()" class="btn-valider" [disabled]="!idDepot">
          ‚úÖ Valider le d√©p√¥t
        </button>
      </div>
    </div>

    <div class="depot-id-info" *ngIf="idDepot">
      <span class="label-id">ID de votre d√©p√¥t</span>
      <code>{{ idDepot }}</code>
      <p class="hint">Conservez cet identifiant et communiquez-le au magasin.</p>
    </div>
  </ng-container>

</div>
