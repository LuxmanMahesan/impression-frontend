<div class="admin-layout">

  <!-- Topbar admin -->
  <div class="admin-topbar">
    <div>
      <h2>Tableau de bord Admin</h2>
      <p class="code-jour">
        Code du jour :
        <strong>{{ codeDuJour ? codeDuJour : '‚Ä¶' }}</strong>
      </p>
    </div>
    <button class="btn-danger" (click)="deconnexion()">üö™ D√©connexion</button>
  </div>

  <hr />

  <!-- Recherche d√©p√¥t -->
  <div class="card">
    <h3>Rechercher un d√©p√¥t</h3>

    <div class="field-row">
      <input [(ngModel)]="idDepot" placeholder="UUID du d√©p√¥t‚Ä¶" />
      <button (click)="chargerDepot()">üîç Charger</button>
    </div>

    @if (message) {
      <p class="message">{{ message }}</p>
    }
  </div>

  <!-- R√©sultat -->
  @if (depotCharge) {
    <div class="card depot-result">
      <div class="depot-meta">
        <div>
          <span class="meta-label">ID</span>
          <code>{{ depotCharge.idDepot }}</code>
        </div>
        <div>
          <span class="meta-label">Statut</span>
          <span class="badge" [class.badge-valide]="depotCharge.statut === 'VALIDE'">
            {{ depotCharge.statut }}
          </span>
        </div>
      </div>

      <hr />

      <h3>Fichiers ({{ depotCharge.fichiers.length }})</h3>

      @if (!depotCharge.fichiers.length) {
        <p class="vide">Aucun fichier dans ce d√©p√¥t.</p>
      } @else {
        <ul class="fichier-list">
          @for (f of depotCharge.fichiers; track f.idFichier) {
            <li>
              <div class="fichier-info">
                <span class="fichier-nom">{{ f.nom }}</span>
                <span class="fichier-meta">{{ f.typeMime }} ¬∑ {{ (f.taille / 1024).toFixed(0) }} Ko</span>
                <span class="fichier-id">{{ f.idFichier }}</span>
              </div>
              <button (click)="telechargerFichier(f.idFichier, f.nom)">‚¨áÔ∏è T√©l√©charger</button>
            </li>
          }
        </ul>
      }
    </div>
  }

</div>
