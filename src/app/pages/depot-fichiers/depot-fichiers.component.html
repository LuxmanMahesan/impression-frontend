<div class="card">

  <div class="page-header">
    <button class="btn-secondary" (click)="retour()">‚Üê Retour</button>
    <div>
      <h2>Uploader des fichiers</h2>
      <p class="depot-id">D√©p√¥t : <code>{{ idDepot }}</code></p>
    </div>
  </div>

  <hr />

  <div class="etape">
    <label class="file-label" for="file-input" [class.disabled]="depotValide">
      <span class="file-icon">üìÇ</span>
      <span>S√©lectionner des fichiers‚Ä¶</span>
      <input
        id="file-input"
        type="file"
        multiple
        accept=".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.jpg,.jpeg,.png,.bmp,.tiff,.tif,.gif,.webp,.txt,.odt,.ods,.odp"
        (change)="surChoixFichiers($event)"
        [disabled]="depotValide"
      />
    </label>

    <p class="hint-format">Formats accept√©s : PDF, Word, Excel, PowerPoint, images (JPG, PNG‚Ä¶), texte</p>

    @if (fichiers.length) {
      <ul class="file-list">
        @for (f of fichiers; track f.name) {
          <li>
            <span class="file-name">{{ f.name }}</span>
            <span class="file-size">{{ (f.size / 1024).toFixed(0) }} Ko</span>
          </li>
        }
      </ul>
    }
  </div>

  <hr />

  <div class="boutons">
    <button (click)="uploader()" [disabled]="!fichiers.length || enCours || depotValide">
      {{ enCours ? '‚è≥ Upload en cours‚Ä¶' : '‚¨ÜÔ∏è Uploader' }}
    </button>
    <button class="btn-valider" (click)="valider()" [disabled]="!idDepot || enCours || depotValide">
      {{ depotValide ? '‚úÖ D√©p√¥t valid√©' : '‚úÖ Valider le d√©p√¥t' }}
    </button>
  </div>

  @if (message) {
    <p class="message">{{ message }}</p>
  }

</div>
